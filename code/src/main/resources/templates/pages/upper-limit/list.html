<div th:replace="shared/header :: header"></div>

<div class="container-fluid container-sm">

	<div th:replace="/pages/upper-limit/track-filter :: filter(@{/upper-limit/list/track})"></div>
	
	<table class="table table-bordered table-striped mt-3">
		<thead>
			<tr>
				<th>Ação</th>
				<th>Total Proventos</th>
				<th>Média Proventos</th>
				<th>Yield Médio</th>
				<th>Preço Atual</th>
				<th>Preço Teto</th>
				<th>Diferença</th>
			</tr>
		</thead>
		<tbody>
			<tr th:if="${results.empty}">
				<td colspan="7" class="text-center">No Results Available</td>
			</tr>
			<tr th:each="result : ${results}">
				<td>
					<span th:text="${result.symbol}"></span>
				</td>
				<td>
					<span th:text="${result.total}"></span>
				</td>
				<td>
					<span th:text="${result.average}"></span>
				</td>
				<td>
					<span th:text="${result.averageYield}"></span>
				</td>
				<td>
					<span th:text="${result.price}"></span>
				</td>
				<td>
					<span th:text="${result.limitPrice}"></span>
				</td>
				<td>
					<span th:text="${result.difference}" class="font-weight-bold" th:classappend="${result.difference > 2} ? 'text-success' : (${result.difference > -2} ? 'text-warning' : 'text-danger')"></span>
				</td>
			</tr>
		</tbody>
	</table>

</div>

<!-- Modal -->
<div th:replace="pages/upper-limit/modal-configure-stock :: modal"></div>

<div th:replace="shared/footer :: footer"></div>

<script>
	$(function() {
		$('#stock').keyup(function(e){
			
			if (event.keyCode === 13) { //enter
	
				$.post( "/upper-limit/stock/add", { symbol: $('#stock').val() }, function( id ) {
					
					var tr = "<tr id=" + id + "><td class=\"text-center\"><span>" + $('#stock').val().toUpperCase() + 
						"</span></td><td class=\"text-center\"><a href=\"#\" onclick=\"deleteConfiguredStock("+ 
								id +")\"><i class=\"fa fa-trash text-danger\"></i></a></td></tr>";
								
					$('#tableConfigureStocks tbody').append(tr);
					
					$('#stock').val('');
				});	
			}
		}); 
	});
</script>
